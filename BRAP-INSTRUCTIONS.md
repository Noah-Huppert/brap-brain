# Brap Instructions
Specific instructions on how to train the model for Brap use.

# Table Of Contents
- [Overview](#overview)
- [Instructions](#instructions)

# Overview
The goal of this project is to try and train GPT-2 on our Discord server's message history.

Shoutout to nshepperd, [Their blog post](https://medium.com/ai-innovation/beginners-guide-to-retrain-gpt-2-117m-to-generate-custom-text-content-8bb5363d8b7f) and [GitHub GTP-2 fork](https://github.com/nshepperd/gpt-2) provided some very helpful code and instructions. The `encode.py`, `load_datasets.py`, and `train.py` files in the `src/` directory are from nshepperd's fork.

# Instructions
## Train the model
Docker and Docker Compose must be installed.

1. Copy `.env-example` and name it `.env`, fill in your own values
  - The `DISCORD_TOKEN` value must be for a bot which has the `bot` scope with the Bot Permissions `Read Messages/View Channels` and `Read Message History`, invite this bot using the URL generated by the Discord Developer Dashboard OAuth2 > URL Generator page
2. Run a script to download all messages from the Discord server:
   ```bash
   ./scripts/download-discord.sh
   ```
3. Start the Docker Compose stack:
   ```bash
   docker-compose up -d --build
   ```
4. Then run a script to transform Discord message files into training data:
   ```bash
   ./scripts/make-training-data.sh
   ```

